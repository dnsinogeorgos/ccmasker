# Listen on our udp 514 port
$ModLoad imudp
$UDPServerRun 514

# Connects the message modification external plugin
module(load="mmexternal")
# Append output="/dev/fd/1" for easier troubleshooting
action(type="mmexternal" binary="/usr/local/bin/ccmasker")

# Minimal rsyslog configuration
$WorkDirectory /var/lib/rsyslog
$ActionFileDefaultTemplate RSYSLOG_TraditionalFileFormat

# Log everything to fd 1 (stdout)
# This must be evaluated AFTER loading the mmexternal plugin
*.* /dev/fd/1
